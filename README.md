# CoCo
## Corpus of Correspondences
Корпус создан студентками НИУ ВШЭ, Школы лингвистики, Настей Добрыниной и Верой Смирновой в рамках проекта (мастерской) “Корпус переписок”. Цель проекта - создание корпуса интернет-речи, содержащей неологизмы и нестандартные слова для дальнейшего использования в исследованиях в сфере языковых изменений и автоматической обработки естественного языка.

Корпус насчитывает 
* 1 053 195 текстов
* 8 205 336 токенов

Материалы взяты из открытых чатов из соцсети Telegram.

Данные обрабатывались с помощью пакета Stanza для Python

## Запуск корпуса через Docker

Проект представляет из себя Flask-приложение, хранится в виде Docker-контейнера, что облегчает его запуск на любом компьютере.

### Пререквизиты

- Docker: [Install Docker](https://docs.docker.com/get-docker/)
- Docker Compose: [Install Docker Compose](https://docs.docker.com/compose/install/)
- 
### 1. Скачайте или склонируйте [docker-compose.yml](https://github.com/AnastasiaDobrynina/CoCo/blob/main/docker-compose.yml)

### 2. Запустите проект с Docker Compose
В папке с файлом docker-compose.yml выполните команду:

```
docker-compose up -d
```
Эта команда запустит два контейнера:

* db: база данных MySQL
* web: приложение Flask
> Флаг -d запускает контейнеры в фоновом режиме.

### 3. Проверьте работу приложения
Откройте браузер и перейдите по адресу:

```
http://localhost:5000
```

### 4. Остановка проекта
Чтобы остановить контейнеры, выполните:

```
docker-compose down
```

### Дополнительная информация:
Образы базы данных и веб-приложения находятся на [Docker Hub](https://hub.docker.com/repository/docker/anesthesia12/coco_corpus/general).
Для доступа к логам используйте:
```
docker-compose logs -f
```
## Инструкция по пользованию корпусом

#### Быстрый поиск
Для быстрого поиска Вы можете воспользоваться _поисковой строкой на главной странице_. В ней возможно осуществить **поиск по одной лемме**.

#### Метаинформация
Вы можете опционально задать ограничение на поиск по следующим параметрам: __категория, сообщество и дата__. Эти параметры распространяются на все остальные поля поиска.

__Категория.__ Можно задать категорию (тему) чатов: _спорт, фандомы, общежития, гейм_. Для этого Вы можете отметить галочкой соответствующий раздел.
__Сообщество.__ Можно выбрать _из выпадающего списка_ конкретное сообщество или несколько. Чтобы выбрать _более одного сообщества_, нажмите на символ “+” справа от поля.

NB: поиск по темам и сообществам выполняется интерсективно, т. е. если выбрать сообщества и тему, несоотвествующие друг другу, результат поиска будет пустым.

__Дата и время__ вводятся в формате _дд:мм:гггг чч:мм_

#### Полнотекстовый поиск

Возможен _поиск по полному совпадению со словосочетанием_, фразой, предложением и тому подобного. 
Принимаются _любые символы_
Полнотекстовый поиск имеет _приоритет над расширенным_: если заполнено поле полнотекстового поиска, параметры расширенного не будут учитываться

NB: пунктация и регистр также учитываются: Привет и привет! – разные запросы.

#### Расширенный поиск
Для поиска по одному слову можно _задать лемму и/или словоформу и/или часть речи_. 
Все поля принимают только __символы латиницы или кириллицы, а также emoji__. Поиск по символам пунктуации и цифрам невозможен
Все поля __чувствительны к регистру__.
В поле часть речи принимаются только обозначения по _Universal POS tags заглавными буквами_.

###### Также возможен поиск по N-граммам.
Чтобы добавить слово в N-грамму, _нажмите на символ ‘+’ рядом с окном первого слова_. При нажатии на плюс рядом с любым другим словом, новое слово добавляется в конец N-граммы. Чтобы убрать слово, нажмите на ‘-’. 
Расстояние между словами считается _в токенах от предыдущего слова_. Расстояние 1 значит что слово будет идти сразу за предыдущим.

NB: __токеном также считается пунктуация__. 
Задать расстояние с помощью _добавления пустого поля невозможно_: запрос будет выполнен только по первым идущим подряд заполненным словам.

#### Результаты поиска
На странице с результатами поиска отображается:
* время выполнения запроса в формате _ч:мм:сс_
* количество вхождений искомого запроса
* параметры запроса:
  * полнотекстовый поиск

    //
  * указанные леммы/словоформы/части речи для каждого слова
  * расстояние между ними
* заданная метаинформация: выбранные темы, сообщества, даты до и после которых осуществляется поиск

Далее представлены _тексты_ (сообщения) из корпуса, удовлетворяющие запросу. Приведен целиком текст сообщения с нумерацией по порядку появления в корпусе. 
Справа снизу представлена информация о сообщении: название чата, тема, к которой относится чат и точная время отправки сообщения. 
__Искомые слова__ выделены жирным.


Чтобы посмотреть грамматическую информацию об искомом слове/словах, _наведите на них_. Появится всплывающее окно, с указанием частеречной разметки и прочей грамматической информации в соответствии с разметкой _Stanza_.

## Контакты
>[Настя](http://t.me/AnastasiaDobrynina_1)

>[Вера](http://t.me/ppwfox)

#####   Желаем Вам приятного использования корпуса и новых открытий!


---------
[Подробная инструкция с иллюстрациями](https://docs.google.com/document/d/1lWKK7s7jBT7HxtA2czjdPd6aXWECfuHw38oMFClBV94/edit?usp=sharing)
